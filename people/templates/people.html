{% extends "base.html" %}

{% block container %}

<div class="container round-light-container">
	<div class="row up-down-padding">
		<div class="span6">
			<div style="margin-left:20px">
				<a class="btn btn-primary" href="/people/add">
					<i class="icon-plus icon-white"></i> Add new person
				</a>
			</div>
		</div>
		<div class="span6">
			<div class="pull-right" style="margin-right:20px">
				<form class="form-search">
					<input id="autocomplete" class="input-large" type="text" placeholder="Search people...">
				</form>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="span12">
			<div class="left-right-padding">
				<table class="table">
					<tr>
						<th>Person id</th>
						<th>First name</th>
						<th>Last name</th>
						<th>Username</th>
						<th>Action</th>
					</tr>
					{% for person in persons %}
					<tr>
						<td>{{person.id}}</td>
						<td>{{person.first_name}}</td>
						<td>{{person.last_name}}</td>
						<td>{{person.username}}</td>
						<td>
							<div class="btn-group">
								<a class="btn" href="/people/{{person.id}}"><i class="icon-search icon-black"></i></a>
								<a class="btn" href="/people/{{person.id}}/delete"><i class="icon-trash icon-black"></i></a>
							</div>
						</td>
					</tr>
					{% endfor %}
				</table>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function(){
		$.getJSON("/autocomplete", function(data){
			$("#autocomplete").autocomplete({
				source:data,
				select: function(event, ui){
					$("#autocomplete").val(ui.item.label);
					window.location = "/people/" + ui.item.value;
					return false;
				}
			});
		});
	})
</script>

{% endblock %}